<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="bootstrap-4.6.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"> <!--Poppins ja Open Sans Fontit-->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.css">
    <link rel="icon" type="image/x-icon" href="icons/favicon.ico">
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <title>Tarinatupa</title>
</head>

<body lang="fi">
    <script>
        const visibleCount = 4;

        function nextSlide(id, event) {
            event.preventDefault(); // Estä linkkien aiheuttama sivun scrollaus
            const track = document.getElementById(id);
            if (!track) return;

            const totalItems = track.children.length;
            const currentIndex = parseInt(track.getAttribute('data-index')) || 0;
            const totalSlides = Math.ceil(totalItems / visibleCount);
            const nextIndex = (currentIndex + 1) % totalSlides;
            track.style.transform = `translateX(-${nextIndex * 100}%)`;
            track.setAttribute('data-index', nextIndex);
        }

        function prevSlide(id, event) {
            event.preventDefault(); // Estä linkkien aiheuttama sivun scrollaus
            const track = document.getElementById(id);
            if (!track) return;

            const totalItems = track.children.length;
            const currentIndex = parseInt(track.getAttribute('data-index')) || 0;
            const totalSlides = Math.ceil(totalItems / visibleCount);
            const nextIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            track.style.transform = `translateX(-${nextIndex * 100}%)`;
            track.setAttribute('data-index', nextIndex);
        }

        // Initial setup
        window.addEventListener('DOMContentLoaded', () => {
            const tracks = document.querySelectorAll('.carousel-track');
            tracks.forEach(track => {
                track.setAttribute('data-index', '0');
            });
        });
    </script>
    <header>
        <nav class="navbar">
            <div class="dropdown">
                <button class="genre-button btn dropdown" data-toggle="dropdown">Genret</button>
                <div class="dropdown-menu poppins genre-dropdown">
                    <a class="dropdown-item" href="fantasiakirjat.html">Fantasiakirjat</a>
                    <a class="dropdown-item" href="kaunokirjallisuus.html">Kaunokirjallisuus</a>
                    <a class="dropdown-item" href="tietokirjat.html">Tietokirjat</a>
                    <a class="dropdown-item" href="kauhukirjat.html">Kauhukirjat</a>
                    <a class="dropdown-item" href="lastenkirjat.html">Lastenkirjat</a>
                    <a class="dropdown-item" href="nuortenkirjat.html">Nuortenkirjat</a>
                    <a class="dropdown-item" href="englanninkieliset.html">Englanninkieliset kirjat</a>
                    <a class="dropdown-item" href="e-kirjat.html">E-kirjat</a>
                    <a class="dropdown-item" href="aanikirjat.html">Äänikirjat</a>
                </div>
            </div>
            <div class="logo">
                <a href="index.html"><img src="kuvat/Tarinatupa_logo.png" alt="Tarinatuvan logo"></a>
                <span class="poppins">Tarinatupa</span>
            </div>
            <div class="search-bar kirjahaku">
                <form action="" id="searchForm" class="d-flex">
                    <input type="text" placeholder="Etsi kirjoja..." id="searchInput">
                    <input type="submit" class="filter-button" value="🔍">
                </form>
                <button class="suodattimet-button" data-toggle="collapse"
                    data-target="#suodattimet">Suodattimet</button>
            </div>
            <div class="actions">
                <select class="language-selector">
                    <option class="fi" value="fi">Suomi</option>
                    <option class="en" value="en">English</option>
                </select>
                <a href="ostoskori.html"><button class="blue-button cart-button">🛒</button></a>
                <a href="kirjaudu.html"><button class="blue-button login-button">Kirjaudu</button></a>
            </div>
        </nav>
        <div id="suodattimet" class="collapse">
            <div class="suodatinrivi">
                <form action="" id="genreform">
                <label for="fantasia">
                    Fantasia
                    <input type="checkbox" id="fantasia" name="genre" value="fantasia" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="kaunokirjallisuus">
                    Kaunokirjallisuus
                    <input type="checkbox" id="kaunokirjallisuus" name="genre" value="kauno" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="tietokirjallisuus">
                    Tietokirjallisuus
                    <input type="checkbox" id="tietokirjallisuus" name="genre" value="tieto" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="kauhu">
                    Kauhu
                    <input type="checkbox" id="kauhu" name="genre" value="kauhu" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="lastenkirjat">
                    Lastenkirjat
                    <input type="checkbox" id="lastenkirjat" name="genre" value="lasten" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="nuortenkirjat">
                    Nuortenkirjat
                    <input type="checkbox" id="nuortenkirjat" name="genre" value="nuorten" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="englanninkieliset">
                    Englanninkielinen
                    <input type="checkbox" id="englanninkieliset" name="genre" value="english" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="e-kirjat">
                    E-kirjat
                    <input type="checkbox" id="e-kirjat" name="genre" value="ekirjat" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
                <label for="aanikirjat">
                    Äänikirjat
                    <input type="checkbox" id="aanikirjat" name="genre" value="aanikirjat" class="custom-checkbox">
                    <span class="checkmark"></span>
                </label>
            </form>
            </div>
            <div class="suodatinrivi">
                <div class="slidercontainer">
                    <div id="minJaMax">
                        <p id="priceRange"></p>
                    </div>
                    <div id="hintaSlider" class="slider"></div>
                </div>
                <div>
                    <form action="" id="searchWriter">
                        <input type="text" placeholder="Etsi kirjailijaa..." id="kirjailijaInput">
                    </form>
                </div>
                    <div class="slidercontainer">
                        <div id="vuosiMinJaMax">
                            <p id="vuosiRange"></p>
                        </div>
                        <div id="vuosiSlider" class="slider"></div>
                    </div>
            </div>
        </div>
    </header>
    <h1 class="h1">Tarinatupa</h1>
    <p class="esittely">Tarinatupa on kirjakauppa ja lainaamo, jossa tarinat heräävät eloon. Meiltä löydät laajan
        valikoiman kirjoja eri
        genreistä - fantasian lumoavista maailmoista tietokirjojen kiehtoviin oivalluksiin. Valitse painettu kirja,
        e-kirja
        tai äänikirja ja sukella seikkailuun. Tule löytämään uutta luettavaa ja anna tarinoiden viedä mukanaan!
    </p>
    <br>
    <section class="carousel-section">
        <h2 class="h2 uutuudet">Uutuudet</h2>
        <div class="custom-carousel">
            <button class="carousel-btn left" onclick="prevSlide('uutuudet', event)">&#10094;</button>
            <div class="carousel-track" id="uutuudet">
                <!-- 12 kirjaa -->
                <a href="uutuudet/Ratkomme_murhia.html"><img src="kuvat/RatkommeMurhia.PNG" alt="Kirja 1"></a>
                <a href="uutuudet/Onyx_storm.html"><img src="kuvat/OnyxStorm.PNG" alt="Kirja 2"></a>
                <a href="uutuudet/Heikki_Silvennoinen_Nousut_ja_laskut.html"><img
                        src="kuvat/HeikkiSilvennoinenNousutJaLaskut.PNG" alt="Kirja 3"></a>
                <a href="tietokirjat/Kylma_krematorio.html"><img src="kuvat/KylmaKrematorio.webp" alt="Kirja 4"></a>
                <a href="uutuudet/Toivoa_versovat_paivat.html"><img src="kuvat/ToivoaVersovatPäivät.PNG"
                        alt="Kirja 5"></a>
                <a href="uutuudet/Punainen_verkko.html"><img src="kuvat/PunainenVerkko.PNG" alt="Kirja 6"></a>
                <a href="uutuudet/The_JFK_conspiracy.html"><img src="kuvat/TheJFKConspiracy.PNG" alt="Kirja 7"></a>
                <a href="tietokirjat/5_Types_Of_Wealth.html"><img src="kuvat/The5TypesOfWealth.webp" alt="Kirja 8"></a>
                <a href="uutuudet/The_winds_of_winter.html"><img src="kuvat/TheWindsOfWinter.PNG" alt="Kirja 9"></a>
                <a href="tietokirjat/Let_Them_Theory.html"><img src="kuvat/TheLetThemTheory.webp" alt="Kirja 10"></a>
                <a href="tietokirjat/Sapiens-Ihmisen_lyhyt_historia.html"><img
                        src="kuvat/SapiensIhmisenLyhytHistoria.webp" alt="Kirja 11"></a>
                <a href="uutuudet/Sadan_vuoden_yksinaisyys.html"><img src="kuvat/SadanVuodenYksinäisyys.PNG"
                        alt="Kirja 12"></a>
            </div>
            <button class="carousel-btn right" onclick="nextSlide('uutuudet', event)">&#10095;</button>
        </div>
    </section>

    <section class="carousel-section">
        <h2 class="h2 suosituimmat">Suosituimmat</h2>
        <div class="custom-carousel">
            <button class="carousel-btn left" onclick="prevSlide('suosituimmat', event)">&#10094;</button>
            <div class="carousel-track" id="suosituimmat">
                <!-- 12 kirjaa -->
                <a href="suosituimmat/Pimeyden_sydan.html"><img src="kuvat/PimeydenSydän.PNG" alt="Kirja 1"></a>
                <a href="suosituimmat/Suon_villi_laulu.html"><img src="kuvat/SuonVilliLaulu.PNG" alt="Kirja 2"></a>
                <a href="suosituimmat/Sota_ja_rauha.html"><img src="kuvat/SotaJaRauha.PNG" alt="Kirja 3"></a>
                <a href="suosituimmat/And_then_there_were_none.html"><img src="kuvat/AndThenThereWereNone.PNG"
                        alt="Kirja 4"></a>
                <a href="suosituimmat/Sinuhe_egyptilainen.html"><img src="kuvat/SinuheEgyptiläinen.PNG"
                        alt="Kirja 5"></a>
                <a href="suosituimmat/Tuntematon_sotilas.html"><img src="kuvat/TuntematonSotilas.PNG" alt="Kirja 6"></a>
                <a href="suosituimmat/Harry_Potter_ja_viisasten_kivi.html"><img
                        src="kuvat/HarryPotterJaViisastenKivi.PNG" alt="Kirja 7"></a>
                <a href="suosituimmat/Taalla_pohjantahden_alla.html"><img src="kuvat/TäälläPohjantähdenAlla.PNG"
                        alt="Kirja 8"></a>
                <a href="tietokirjat/SunTzu'sTheArtOfWar.html"><img src="kuvat/SunTzu'sTheArtOfWar.avif"
                        alt="Kirja 9"></a>
                <a href="suosituimmat/The_lord_of_the_rings.html"><img src="kuvat/TheLordOfTheRings.PNG"
                        alt="Kirja 10"></a>
                <a href="tietokirjat/Sinun_tahtesi_taalla.html"><img src="kuvat/SinunTahtesiTaalla.webp"
                        alt="Kirja 11"></a>
                <a href="suosituimmat/Hohto.html"><img src="kuvat/Hohto.PNG" alt="Kirja 12"></a>
            </div>
            <button class="carousel-btn right" onclick="nextSlide('suosituimmat', event)">&#10095;</button>
        </div>
    </section>
    <!-- Muista sisällyttää Bootstrapin JS-tiedostot ennen <body> loppua -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script><!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script><!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>
    <br>
    <footer>
        <div class="footer-content">
            <p class="contact-info">
                📧 asiakaspalvelu@tarinatupa.fi | 📞 044 123 1234 | 📍 Kotkantie 2, 90250 Oulu
            </p>
            <p class="opening-hours">
                Aukioloajat: Ma-Pe 9-18, La 10-16, Su suljettu
            </p>
            <p class="newsletter">
                <a href="uutiskirje.html">Tilaa uutiskirjeemme</a>
            </p>
        </div>
        <div class="social-icons">
            <a href="#" target="_blank"><img src="icons/facebook.svg" alt="Facebook"></a>
            <a href="#" target="_blank"><img src="icons/x.svg" alt="X (Twitter)"></a>
            <a href="#" target="_blank"><img src="icons/youtube.svg" alt="YouTube"></a>
        </div>
    </footer>
    <script src="javascript/sliders.js"></script>
    <script defer>
        document.getElementById("searchForm").addEventListener('submit', function (e) {
            e.preventDefault();
            Lahetys()
        });
        document.getElementById("searchWriter").addEventListener('submit', function (e) {
            e.preventDefault();
            Lahetys()
        });
        function Lahetys() {
            let genre = "null"
            let hintaRange = `${hintaMin}–${hintaMax}`
            if (document.querySelector('input[name="genre"]:checked')) {
                genre = document.querySelector('input[name="genre"]:checked').value
            }
            const julkaisuvuosi = `${vuosiMin}–${vuosiMax}`
            const query = document.getElementById('searchInput').value.trim();
            const writerQuery = document.getElementById('kirjailijaInput').value.replace(/[-_\.]/g, "");
            window.location.href = 'kirjahaku.html?q=' + encodeURIComponent(genre) + encodeURIComponent("_") + encodeURIComponent(hintaRange) + encodeURIComponent("_") + encodeURIComponent(julkaisuvuosi) + encodeURIComponent("_") + encodeURIComponent(writerQuery) + encodeURIComponent("_") + encodeURIComponent(query);
        }
    </script>
    <script defer> //Kielen vaihto
        const body = document.querySelector("body");
        const html = document.querySelector("html");
        const langSelect = document.querySelector(".language-selector")
        const suodattimetButton = document.querySelector(".suodattimet-button")
        const genreButton = document.querySelector(".genre-button")
        const genreOptions = document.querySelectorAll(".genre-dropdown .dropdown-item")
        const genreSuodatin = document.querySelectorAll("#suodattimet label")
        const kirjailijaSearchBar = document.querySelector("#kirjailijaInput")
        const loginButton = document.querySelector(".login-button")
        const searchBar = document.querySelector(".kirjahaku input")
        const openingHours = document.querySelector(".opening-hours")
        const newsletter = document.querySelector(".newsletter a")
        const esittely = document.querySelector(".esittely") //näitä kolmea viimeistä ei tarvi muissa sivuissa
        const uutuudet = document.querySelector(".uutuudet")
        const suosituimmat = document.querySelector(".suosituimmat")

        const genreOptionsFi = ["Fantasiakirjat", "Kaunokirjallisuus", "Tietokirjat", "Kauhukirjat", "Lastenkirjat", "Nuortenkirjat", "Englanninkieliset kirjat", "E-kirjat", "Äänikirjat"]
        const genreOptionsEn = ["Fantasy books", "Fiction", "Non-fiction", "Horror books", "Children's books", "Young adult books", "English books", "E-books", "Audiobooks"]
        const genreSuodatinFi = ["Fantasia", "Kaunokirjallisuus", "Tietokirjallisuus", "Kauhu", "Lastenkirjat", "Nuortenkirjat", "Englanninkielinen", "E-kirjat", "Äänikirjat"]
        const genreSuodatinEn = ["Fantasy", "Fiction", "Non-fiction", "Horror", "For children", "For young adults", "English books", "E-books", "Audiobooks"]


        langSelect.addEventListener("change", () => {
            if (html.getAttribute("lang") == "fi") {
                body.setAttribute("lang", "en");
                html.setAttribute("lang", "en");
                genreButton.textContent = "Genres"
                loginButton.textContent = "Login"
                suodattimetButton.textContent = "Filters"
                searchBar.setAttribute("placeholder", "Search books...")
                kirjailijaSearchBar.setAttribute("placeholder", "Search a writer...")
                openingHours.textContent = "Opening hours: Mon-Fri 9-18, Sat 10-16, Sun closed"
                newsletter.textContent = "Subscribe to our newsletter"
                genreOptions.forEach((link, index) => link.textContent = genreOptionsEn[index]);
                genreSuodatin.forEach((label, index) => {
                const textNode = Array.from(label.childNodes).find(node => node.nodeType === Node.TEXT_NODE);
                if (textNode) textNode.nodeValue = genreSuodatinEn[index];
                });
                esittely.textContent = "Tarinatupa is a bookstore and lending library where stories come to life. We have a wide selection of books from different\<br>\genres - from the enchanting worlds of fantasy to the fascinating insights of non-fiction. Choose a printed book, e-book\<br>\or audiobook and dive into the adventure. Come and find something new to read and let the stories take you away!"
                uutuudet.textContent = "New Books"
                suosituimmat.textContent = "Most popular"
                kieli = 1
                priceRange.textContent = `${labelTekstit[kieli][0]}: ${hintaMin}–${hintaMax} €`;
                vuosiRange.textContent = `${labelTekstit[kieli][1]}: ${vuosiMin}–${vuosiMax}`;
                console.log("english");
            } else {
                body.setAttribute("lang", "fi");
                html.setAttribute("lang", "fi");
                genreButton.textContent = "Genret"
                loginButton.textContent = "Kirjaudu"
                suodattimetButton.textContent = "Suodattimet"
                searchBar.setAttribute("placeholder", "Etsi kirjoja...")
                kirjailijaSearchBar.setAttribute("placeholder", "Etsi kirjailijaa...")
                openingHours.textContent = "Aukioloajat: Ma-Pe 9-18, La 10-16, Su suljettu"
                newsletter.textContent = "Tilaa uutiskirjeemme"
                genreOptions.forEach((link, index) => link.textContent = genreOptionsFi[index]);
                genreSuodatin.forEach((label, index) => {
                const textNode = Array.from(label.childNodes).find(node => node.nodeType === Node.TEXT_NODE);
                if (textNode) textNode.nodeValue = genreSuodatinFi[index];
                });
                esittely.textContent = "Tarinatupa on kirjakauppa ja lainaamo, jossa tarinat heräävät eloon. Meiltä löydät laajan valikoiman kirjoja eri \<br>\genreistä - fantasian lumoavista maailmoista tietokirjojen kiehtoviin oivalluksiin. Valitse painettu kirja, e-kirja \<br>\tai äänikirja ja sukella seikkailuun. Tule löytämään uutta luettavaa ja anna tarinoiden viedä mukanaan!"
                uutuudet.textContent = "Uutuudet"
                suosituimmat.textContent = "Suosituimmat"
                kieli = 0
                priceRange.textContent = `${labelTekstit[kieli][0]}: ${hintaMin}–${hintaMax} €`;
                vuosiRange.textContent = `${labelTekstit[kieli][1]}: ${vuosiMin}–${vuosiMax}`;
                console.log("finnish");
            }
        });
    </script>
</body>

</html>